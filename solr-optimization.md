---
title: solr优化建议 
date: 2019-10-30T07:07:31.230Z
tags: 
categories:
draft: true
description: 
---



一、关闭硬提交
目的：提高入库的效率
硬提交：提交后必须立刻能搜索到
软提交：异步方式，不一定能立刻搜索到

14点之前使用硬提交，每小时入库4.7万。
14点以后使用软提交，每小时入库2.3万。
性能提升4倍

```accesslog
time                 save2solr
2019-10-30T12:00:00  477767      
2019-10-30T13:00:00  473278      
2019-10-30T14:00:00  2385156     
```

二、增加内存
目的：提高查询效率
修改前
堆内存：   5g
直接内存： 7g


修改后
堆内存：   10g
直接内存： 15g

三、增加share数量
目的：提高查询效率


